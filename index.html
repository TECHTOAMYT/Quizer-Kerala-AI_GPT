<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6700613757323923"
     crossorigin="anonymous"></script>
    <meta name="google-adsense-account" content="ca-pub-6700613757323923">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AM QUIZ FOR PSC</title>
    <style>
        /* Add your existing styles here */
    </style>
</head>
<body>
    <!-- Add your existing HTML structure here -->
    <div class="welcome-page active">
        <h1>AM QUIZ FOR PSC</h1>
        <h2>Base Version</h2>
        <div class="animated-text">#MadewithL♥️ve</div>
        <h3 style="color: orange; margin-top: 10px;">Made in India</h3>
        <button class="btn" id="start-quiz">Let's Begin</button>
    </div>
    <div class="quiz-page">
        <div class="header">
            <div style="display: flex; justify-content: space-between; padding: 0 20px;">
                <h3 id="question-number">Question 1/25</h3>
            </div>
        </div>
        <div class="timer">
            <div class="analog">
                <div class="hand" id="analog-hand"></div>
            </div>
            <span id="timer-display">25</span> seconds
        </div>
        <div class="question" id="question-text">Question will appear here.</div>
        <div class="answers" id="answers-container"></div>
    </div>
    <div class="end-page">
        <h2>Quiz Completed!</h2>
        <div class="result" id="final-score">Your Score: 0/25</div>
        <button class="btn" id="restart-quiz">Restart Quiz</button>
    </div>

    <script>
        let questions = [];
        let currentQuestion = 0;
        let score = 0;
        let timerInterval;

        const welcomePage = document.querySelector('.welcome-page');
        const quizPage = document.querySelector('.quiz-page');
        const endPage = document.querySelector('.end-page');

        const startQuizButton = document.getElementById('start-quiz');
        const restartQuizButton = document.getElementById('restart-quiz');

        const questionText = document.getElementById('question-text');
        const answersContainer = document.getElementById('answers-container');
        const timerDisplay = document.getElementById('timer-display');
        const analogHand = document.getElementById('analog-hand');
        const questionNumber = document.getElementById('question-number');
        const finalScore = document.getElementById('final-score');

        async function fetchQuestions() {
            try {
                const response = await fetch('quin.txt');
                const text = await response.text();
                questions = JSON.parse(text);
            } catch (error) {
                console.error("Error fetching questions:", error);
                alert("Could not load questions. Please try again later.");
            }
        }

        function startQuiz() {
            currentQuestion = 0;
            score = 0;
            loadQuestion();
            welcomePage.classList.remove('active');
            quizPage.classList.add('active');
        }

        function endQuiz() {
            quizPage.classList.remove('active');
            endPage.classList.add('active');
            finalScore.textContent = `Your Score: ${score}/${questions.length}`;
        }

        function restartQuiz() {
            endPage.classList.remove('active');
            welcomePage.classList.add('active');
        }

        function loadQuestion() {
            if (currentQuestion >= questions.length) {
                endQuiz();
                return;
            }

            const q = questions[currentQuestion];
            questionText.textContent = q.question;
            answersContainer.innerHTML = '';
            questionNumber.textContent = `Question ${currentQuestion + 1}/${questions.length}`;

            q.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.textContent = `${String.fromCharCode(65 + index)}. ${option}`;
                button.onclick = () => checkAnswer(index === q.correct);
                answersContainer.appendChild(button);
            });

            startTimer();
        }

        function checkAnswer(correct) {
            clearInterval(timerInterval);
            if (correct) score++;
            currentQuestion++;
            loadQuestion();
        }

        function startTimer() {
            let timeLeft = 25;
            timerDisplay.textContent = timeLeft;
            analogHand.style.transform = `rotate(0deg)`;

            timerInterval = setInterval(() => {
                timeLeft--;
                timerDisplay.textContent = timeLeft;
                analogHand.style.transform = `rotate(${(25 - timeLeft) * 14.4}deg)`;
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    checkAnswer(false);
                }
            }, 1000);
        }

        startQuizButton.addEventListener('click', startQuiz);
        restartQuizButton.addEventListener('click', restartQuiz);

        // Fetch questions on page load
        fetchQuestions();
    </script>
</body>
</html>

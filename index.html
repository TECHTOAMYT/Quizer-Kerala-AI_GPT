<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6700613757323923" crossorigin="anonymous"></script>
    <meta name="google-adsense-account" content="ca-pub-6700613757323923">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AM QUIZ FOR PSC</title>
    <style>
        /* Your existing styles here */
    </style>
</head>
<body>
    <!-- Welcome Page -->
    <div class="welcome-page active">
        <h1>AM QUIZ FOR PSC</h1>
        <h2>Base Version</h2>
        <div class="animated-text">#MadewithL♥️ve</div>
        <h3 style="color: orange; margin-top: 10px;">Made in India</h3>
        <button class="btn" id="start-quiz">Let's Begin</button>
    </div>

    <!-- Quiz Page -->
    <div class="quiz-page">
        <div class="header">
            <h3 id="question-number">Question 1/25</h3>
        </div>
        <div class="timer">
            <span id="timer-display">25</span> seconds
        </div>
        <div class="question" id="question-text">Question will appear here.</div>
        <div class="answers" id="answers-container"></div>
        <div class="score-board">
            Score: <span id="score-display">0</span>/25
        </div>
    </div>

    <!-- End Page -->
    <div class="end-page">
        <h2>Quiz Completed!</h2>
        <div class="result" id="final-score">Your Score: 0/25</div>
        <button class="btn" id="restart-quiz">Restart Quiz</button>
    </div>

    <script>
        let questions = [];
        let currentQuestion = 0;
        let score = 0;
        let timerInterval;

        const welcomePage = document.querySelector('.welcome-page');
        const quizPage = document.querySelector('.quiz-page');
        const endPage = document.querySelector('.end-page');

        const startQuizButton = document.getElementById('start-quiz');
        const restartQuizButton = document.getElementById('restart-quiz');
        const questionText = document.getElementById('question-text');
        const answersContainer = document.getElementById('answers-container');
        const timerDisplay = document.getElementById('timer-display');
        const questionNumber = document.getElementById('question-number');
        const finalScore = document.getElementById('final-score');
        const scoreDisplay = document.getElementById('score-display');

        async function loadQuestions() {
            try {
                const response = await fetch('quin.txt');
                const text = await response.text();
                questions = JSON.parse(`[${text}]`);
                console.log('Questions loaded:', questions);
            } catch (error) {
                console.error('Error loading questions:', error);
            }
        }

        function startQuiz() {
            currentQuestion = 0;
            score = 0;
            scoreDisplay.textContent = score;
            shuffleArray(questions); // Shuffle questions
            welcomePage.classList.remove('active');
            quizPage.classList.add('active');
            loadQuestion();
        }

        function endQuiz() {
            quizPage.classList.remove('active');
            endPage.classList.add('active');
            finalScore.textContent = `Your Score: ${score}/${questions.length}`;
        }

        function restartQuiz() {
            endPage.classList.remove('active');
            welcomePage.classList.add('active');
        }

        function loadQuestion() {
            if (currentQuestion >= questions.length) {
                endQuiz();
                return;
            }

            const q = questions[currentQuestion];
            questionText.textContent = q.question;
            answersContainer.innerHTML = '';
            questionNumber.textContent = `Question ${currentQuestion + 1}/${questions.length}`;

            q.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.textContent = option;
                button.onclick = () => checkAnswer(index === q.correct);
                answersContainer.appendChild(button);
            });

            startTimer();
        }

        function checkAnswer(correct) {
            clearInterval(timerInterval);
            if (correct) {
                score++;
                scoreDisplay.textContent = score;
            }
            currentQuestion++;
            loadQuestion();
        }

        function startTimer() {
            let timeLeft = 25;
            timerDisplay.textContent = timeLeft;

            timerInterval = setInterval(() => {
                timeLeft--;
                timerDisplay.textContent = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    checkAnswer(false);
                }
            }, 1000);
        }

        function shuffleArray(arr) {
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
        }

        startQuizButton.addEventListener('click', () => {
            loadQuestions().then(startQuiz);
        });
        restartQuizButton.addEventListener('click', restartQuiz);
    </script>
</body>
</html>
